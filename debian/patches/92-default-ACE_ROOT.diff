#! /bin/sh /usr/share/dpatch/dpatch-run
## 92-default-ACE_ROOT.dpatch by Thomas Girard <thomas.g.girard@free.fr>
##
## All lines beginning with `## DP:' are a description of the patch.
## DP: Automatically set ACE_ROOT to /usr/share/ace in MPC generated
## DP: GNUmakefile if no ACE_ROOT is set.

@DPATCH@
Index: pkg-ace/bin/MakeProjectCreator/modules/GNUACEWorkspaceCreator.pm
===================================================================
--- pkg-ace.orig/bin/MakeProjectCreator/modules/GNUACEWorkspaceCreator.pm	2010-09-17 09:52:52.000000000 +0200
+++ pkg-ace/bin/MakeProjectCreator/modules/GNUACEWorkspaceCreator.pm	2011-07-22 16:01:52.788979314 +0200
@@ -94,6 +94,9 @@
             "ifeq (\$(findstring k,\$(MAKEFLAGS)),k)$crlf",
             "  KEEP_GOING = -$crlf",
             "endif$crlf$crlf",
+            "ifndef ACE_ROOT$crlf",
+            "  export ACE_ROOT = /usr/lib/ace$crlf",
+            "endif$crlf",
             "include \$(ACE_ROOT)/include/makeinclude/macros.GNU$crlf";
 
   if ($named) {
